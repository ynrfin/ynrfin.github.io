+++
blog_body = "What you need to check for migration thing\n\n# Pre-Project\n\nIt is a good thing to check and test your choice of solution before you jump to your project only to find out that the tools that you choose is not working properly in the middle of the project or near the end of it. \n\nThis is checklist before you get wet using a migration tool for your project, only to find out the tool that you choose has some difficulty on doing what you need it to do. For example there are web framework that need dependency to change column definition (Laravel needs `doctrine/dbal`). So try this checklist to check whether your migration tool is working as you expect it to. \n\n1. Create Column\n2. Change column definition\n3. Change column name\n4. remove column\n5. Create Foreign Key (Does it automatically create index?)\n6. How to drop Foreign Key (check the foreign key & the index)\n\n# Do not forget\n\nMigration is not  only how you create a new table. In real world need, I rollback and remigrate frequently when doing software development. The reasons I have encountered:\n\n- Table's definition change.\n- The dummy factory definition does not give a satisfactory value\n\nThat's the TL;DR version of this checklist. \n\n### I  need to re-populate dummy record.\n\nFirst case is when you just clone the project. It does not have \n\n### The dummy factory definition does not give a satisfactory value\n\n<maybe use this on \"Why Learn to Generate Dummy Records\">\nUsing factory record is a great way to speed up your development. It will gave you some random records and save it to database. You do not need to input records manually to database. If you wanted to check pagination or record filtering, it would be very painful to insert database records one by one. Did you think your tables has no relationship? Nope, there will be cases where you need to populate more than 1 table at the same time.\n\nyou need to make a model/table factory definition that make sense and as near as possible to your production database. Never underestimate human error as you would not get it on your first try. My solution? remove the current database entries, fix your factory definition, and then re-populate your table(s). \n\nBut I could just drop the database then remigrate. \n\nLet's see what steps we need to take to do that\n- open database application\n- select the database\n- click-click to empty/truncate/drop your database\n- confirm\n- (Additional Step) recreate database\n\nCompared to :\n\n- run a command to rollback and redo all migrations and insert records accordingly\n\nIt is simpler. And people will be lazy. A few times of those manual procedure each day on your working hours, and it became a boring task, you would wish to automate it.\n\nBonus point to running command, your terminal is doing some things and your colleagues would think you are doing some serious work.\n \n when creating some random record, the factory definition does not give a satisfactory dummy records, so I need to tweak & re\n\n### Bad Things Happen On Production\n\nMaybe something goes bad on production server and you need to rollback you database. "
draft = true
title = "Migration Checklist"

+++
